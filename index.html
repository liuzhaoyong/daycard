<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一年级成长打卡表</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>🎉 丢丢小朋友每日成长打卡表 🎉</h1>
        <div class="date-highlight">
            <div class="date-main">
                📅 <span id="currentYear"></span>年<span id="currentMonth"></span>月<span id="currentDay"></span>日
            </div>
            <div class="date-weekday" id="currentWeekday"></div>
            <div class="date-subtitle">🌈 我的每日成长足迹 🌈</div>
        </div>


        <!-- 操作提示卡片 -->
        <div class="help-card" id="helpCard">
            <div class="help-header">
                <span class="help-title">🎯 怎么使用打卡表？</span>
                <button class="help-close" onclick="toggleHelpCard()">×</button>
            </div>
            <div class="help-content">
                <div class="help-step">
                    <span class="step-number">1</span>
                    <span class="step-text">点击彩色圆圈选择今天的表现</span>
                    <div class="step-demo">
                        <span class="demo-status done">+1</span>
                        <span class="demo-status neutral">0</span>
                        <span class="demo-status not-done">-1</span>
                    </div>
                </div>
                <div class="help-step">
                    <span class="step-number">2</span>
                    <span class="step-text">完成所有任务后点击确认按钮</span>
                </div>
                <div class="help-step">
                    <span class="step-number">3</span>
                    <span class="step-text">看看能兑换什么奖励吧！</span>
                </div>
            </div>
        </div>

        <button class="help-toggle" onclick="toggleHelpCard()">❓ 使用帮助</button>

        <!-- 固定分数统计区域 -->
        <div class="fixed-score-section">
            <div class="score-summary">
                <div class="score-item-fixed">
                    <span class="score-label-fixed">今天总分</span>
                    <span class="score-value-fixed" id="todayTotalFixed">0.0</span>
                </div>
                <div class="score-item-fixed">
                    <span class="score-label-fixed">挑战加分</span>
                    <span class="score-value-fixed" id="challengeTotalFixed">0</span>
                </div>
                <div class="score-item-fixed total-score-fixed">
                    <span class="score-label-fixed">我的积分</span>
                    <span class="score-value-fixed" id="myScoreFixed">0.0</span>
                </div>
            </div>

            <!-- 进度显示 -->
            <div class="progress-section-fixed">
                <div class="progress-title-fixed">📈 今日完成进度</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    <div class="progress-text" id="progressText">0/17 个任务</div>
                </div>
            </div>



            <!-- 确认按钮 -->
            <div class="confirm-section-fixed">
                <button class="confirm-btn-fixed" id="confirmBtnFixed" disabled onclick="showRewardModal()">
                    🌟 确认今日分数 🌟
                </button>
            </div>
        </div>

        <h2>📝 日常任务</h2>
        <table class="daily-table">
            <thead>
                <tr>
                    <th>分类</th>
                    <th>小任务</th>
                    <th>得分怎么算</th>
                    <th>我得几分</th>
                </tr>
            </thead>
            <tbody>
                <!-- 任务内容将通过JavaScript动态生成 -->
            </tbody>
        </table>

        <h2>🏆 挑战任务</h2>
        <table class="challenge-table">
            <thead>
                <tr>
                    <th>挑战内容</th>
                    <th>完成要求</th>
                    <th>是否完成（打✅）</th>
                    <th>加分记录</th>
                </tr>
            </thead>
            <tbody>
                <!-- 挑战任务内容将通过JavaScript动态生成 -->
            </tbody>
        </table>



        <h2>🎁 攒分换奖励</h2>
        <table class="reward-table">
            <thead>
                <tr>
                    <th>攒够积分</th>
                    <th>奖励内容</th>
                    <th>温馨提示</th>
                    <th>兑换操作</th>
                </tr>
            </thead>
            <tbody>
                <!-- 奖励内容将通过JavaScript动态生成 -->
            </tbody>
        </table>

        <div class="rule">
            <h3>📋 小规则</h3>
            <p>✅ 做对日常任务填加分，❌ 没做好填扣分（没做错填0）；</p>
            <p>🍽️ 三餐得分按"用时梯度"计算，早餐15分钟内最快吃完得分最高，午餐、晚餐按学龄儿童合理时长设定；</p>
            <p>🍎 "尝试新食物"需在当天用餐时完成，尝试1种即可加分，不强迫多试；</p>
            <p>👕 早晚刷牙、穿衣服、收书包等"自己的事"均独立评分，做到一项加对应分数，没做到一项减对应分数；</p>
            <p>🏆 挑战任务完成后，和爸妈一起打✅，再加上对应分数（爬山+15分，其他+20分）；</p>
            <p class="highlight">📺 每天晚上10点要准时关掉电视，不熬夜看动画；</p>
            <p class="highlight">🎮 Switch游戏只有周末才能玩，周一到周五不能玩哦～</p>
            <p>⏰ 挑战任务可以慢慢完成，不用每天都做，完成一项加一项的分！</p>
        </div>
    </div>



    <!-- 奖励弹窗 -->
    <div class="reward-modal" id="rewardModal">
        <div class="reward-content">
            <div class="reward-title">🎉 今日成果报告 🎉</div>
            <div class="reward-score" id="modalTodayScore">今天得分：0分</div>
            <div class="reward-score" id="modalTotalScore">累计总分：0分</div>
            
            <!-- 今日总结区域 -->
            <div id="todaySummary" class="today-summary-container"></div>
            
            <div id="rewardMessage" class="reward-message"></div>
            <button class="close-btn" onclick="closeRewardModal()">知道了 😊</button>
        </div>
    </div>

    <!-- 生字填写弹窗 -->
    <div class="input-modal" id="characterModal">
        <div class="input-content">
            <div class="input-title">🔤 分享今天学到的新生字</div>

            <div class="example-section">
                <div class="example-title">📚 填写示例：</div>
                <div class="example-text">
                    春 花 树 鸟 飞
                </div>
            </div>

            <div class="input-section">
                <div class="input-label">✏️ 请写下你今天学到的新生字：</div>
                <textarea class="input-field" id="characterInput"
                    placeholder="请直接写出学到的生字，用空格分开&#10;比如：春 花 树 鸟 飞"></textarea>
                <div class="input-hint">
                    💡 小贴士：直接写出今天学到的生字就可以了，每个字之间用空格分开！
                </div>
                <div class="input-counter" id="characterCounter">字数：0 | 得分：0分</div>
            </div>

            <div class="input-buttons">
                <button class="input-save-btn" onclick="saveCharacters()">💾 保存生字</button>
                <button class="input-cancel-btn" onclick="closeCharacterModal()">❌ 取消</button>
            </div>
        </div>
    </div>

    <!-- 单词填写弹窗 -->
    <div class="input-modal" id="wordModal">
        <div class="input-content">
            <div class="input-title">🔠 分享今天学到的新单词</div>

            <div class="example-section">
                <div class="example-title">📚 填写示例：</div>
                <div class="example-text">
                    apple cat dog book pen
                </div>
            </div>

            <div class="input-section">
                <div class="input-label">✏️ 请写下你今天学到的新单词：</div>
                <textarea class="input-field" id="wordInput"
                    placeholder="请直接写出学到的单词，用空格分开&#10;比如：apple cat dog book pen"></textarea>
                <div class="input-hint">
                    💡 小贴士：直接写出今天学到的单词就可以了，每个单词之间用空格分开！
                </div>
                <div class="input-counter" id="wordCounter">字数：0 | 得分：0分</div>
            </div>

            <div class="input-buttons">
                <button class="input-save-btn" onclick="saveWords()">💾 保存单词</button>
                <button class="input-cancel-btn" onclick="closeWordModal()">❌ 取消</button>
            </div>
        </div>
    </div>

    <!-- 帮忙做事填写弹窗 -->
    <div class="input-modal" id="houseworkModal">
        <div class="input-content">
            <div class="input-title">🤝 分享今天帮忙做的事情</div>

            <div class="example-section">
                <div class="example-title">📚 填写示例：</div>
                <div class="example-text">
                    扫地 擦桌子 收拾房间 洗碗 倒垃圾
                </div>
            </div>

            <div class="input-section">
                <div class="input-label">✏️ 请写下你今天帮忙做的事情：</div>
                <textarea class="input-field" id="houseworkInput"
                    placeholder="请写出今天帮忙做的事情，用空格分开&#10;比如：扫地 擦桌子 收拾房间 洗碗 倒垃圾"></textarea>
                <div class="input-hint">
                    💡 小贴士：写出今天帮忙做的事情，每件事之间用空格分开，每项加1分！
                </div>
                <div class="input-counter" id="houseworkCounter">事项数：0 | 得分：0分</div>
            </div>

            <div class="input-buttons">
                <button class="input-save-btn" onclick="saveHousework()">💾 保存记录</button>
                <button class="input-cancel-btn" onclick="closeHouseworkModal()">❌ 取消</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>